@startuml
!theme mars
autonumber
skinparam backgroundColor #EEEBDC

skinparam {
Maxmessagesize 170
Roundcorner 17
ParticipantPadding 30
ParticipantFontSize 18
BoxPadding 10
DatabaseBackgroundColor Wheat
ActorFontSize 15
}

header REPAIR 9 ¾
title UC-01 Передать заявку Исполнителю \n
footer \n\n | tg @AmperYev |       Konovalov Andrey, 2023

box #Pink
Actor "Диспетчер" as brain order 10 
end box
box #LightBlue
Participant "Клиент" as client order 20
end box
box #LightGreen 
Participant "Сервер" as server order 30
Database "БД" as db order 35
end box
box #LightYellow
Participant "Внешняя ИС" as customerIS order 40
end box
box #Magenta

!$pnz = "перечень новых заявок"
!$dpr = "данные по предыстории ремонтов"

server -> customerIS: Опросить систему, чтобы получить $pnz
customerIS --> server: Передать $pnz
server -> db: Сохранить $pnz
brain -> client: Открыть $pnz
client -> server: Запросить $pnz
server -> db: Запросить $pnz
db --> server: Передать $pnz
server --> client: Передать $pnz
client -> client: Отображает $pnz
brain -> client: Выбрать заявку
client -> client: Отобразить, что запрос в обработке
client -> server: Запросить $dpr
server -> db: Запросить $dpr
db --> server: Отправить $dpr
server --> client: Отправить $dpr
client -> client: Предоставить для выбора Исполнителей согласно логике
brain -> client: Выбрать исполнителя
client -> server: Передать заявку Исполнителю
server --> client: Подтвердить получение заявки Исполнителем
client -> client: Отобразить подтверждение получения заявки
server -> db: Установить для переданной заявки статус "Рабочее"

@enduml